#!/bin/zsh

# --- ä¸€é”®åœæ­¢æ‰€æœ‰æœåŠ¡ (ç²¾å‡†æ‰“å‡»ç‰ˆ) ---
#
# å¯¹é¡½å›ºçš„å‰ç«¯æœåŠ¡ä½¿ç”¨ç«¯å£å·æŸ¥æ€ï¼Œ
# å¯¹å…¶ä»–æœåŠ¡ä½¿ç”¨å¸¸è§„çš„æŒ‰åç§°æŸ¥æ‰¾æ–¹å¼ã€‚

echo "ğŸ›‘  å¼€å§‹åœæ­¢æ‰€æœ‰æ™ºèƒ½åº§ä½é¢„å®šæœåŠ¡..."
echo "----------------------------------------"

# --- [å¼ºåˆ¶] æŒ‰ç«¯å£å·å…³é—­é¡½å›ºçš„ React å‰ç«¯ ---
echo "ğŸ”ª  æ­£åœ¨å¼ºåˆ¶å…³é—­ React å‰ç«¯ (ç«¯å£ 3000)..."
# ä½¿ç”¨ lsof æŸ¥æ‰¾å ç”¨ TCP ç«¯å£ 3000 çš„è¿›ç¨‹IDï¼Œç„¶åç”¨ kill -9 å¼ºåˆ¶åœæ­¢
lsof -t -i tcp:3000 | xargs kill -9 2>/dev/null


# --- [å¸¸è§„] æŒ‰åç§°å…³é—­å…¶ä»–æœåŠ¡ ---
echo "ğŸ”ª  æ­£åœ¨åœæ­¢ ARIMA æœåŠ¡ (app.py)..."
pkill -f "python app.py"

echo "ğŸ”ª  æ­£åœ¨åœæ­¢ Model Service (seat-predict.py)..."
pkill -f "seat-predict.py"

echo "ğŸ”ª  æ­£åœ¨åœæ­¢ RL API æœåŠ¡ (rl_api:app)..."
pkill -f "uvicorn rl_api:app"

echo "ğŸ”ª  æ­£åœ¨åœæ­¢ RL Node App (app.js)..."
pkill -f "node app.js"

echo "ğŸ”ª  æ­£åœ¨åœæ­¢ Backend ä¸»æœåŠ¡ (index.js)..."
pkill -f "node index.js"


echo "----------------------------------------"
echo "âœ…  æ‰€æœ‰ç›¸å…³æœåŠ¡å·²åœæ­¢ã€‚"